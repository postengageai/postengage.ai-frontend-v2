import type {
  CreditBalance,
  CreditTransaction,
  CreditUsage,
  Invoice,
} from '@/lib/types/credits';

export const mockCreditBalance: CreditBalance = {
  available_credits: 9980,
};

export const mockTransactions: CreditTransaction[] = [
  {
    _id: '6961336de8b0b130fb531b3c',
    user_id: '695fdcb16c5b76e715cf51ea',
    credit_package_id: null,
    order_id: null,
    automation_id: '695fdd576c5b76e715cf5209',
    transaction_type: 'consumption',
    status: 'completed',
    credit_amount: 4,
    balance_before: 9984,
    balance_after: 9980,
    description: 'Automation Executed: Price Inquiry Automation',
    reference_id: '695fdd576c5b76e715cf520c',
    operation_id: null,
    failure_reason: null,
    processed_at: '2026-01-09T16:57:22.925Z',
    cancelled_at: null,
    created_at: '2026-01-09T16:57:17.477Z',
    updated_at: '2026-01-09T16:57:22.926Z',
  },
  {
    _id: '696093fa4acf5babe5db5b26',
    user_id: '695fdcb16c5b76e715cf51ea',
    credit_package_id: null,
    order_id: null,
    automation_id: '695fdd576c5b76e715cf5209',
    transaction_type: 'consumption',
    status: 'cancelled',
    credit_amount: 4,
    balance_before: 9988,
    balance_after: 9984,
    description: 'Rollback: Automation Execution: Price Inquiry Automation',
    reference_id: '695fdd576c5b76e715cf520c',
    operation_id: null,
    failure_reason: null,
    processed_at: '2026-01-09T05:36:59.935Z',
    cancelled_at: null,
    created_at: '2026-01-09T05:36:58.298Z',
    updated_at: '2026-01-09T05:36:59.936Z',
  },
  {
    _id: '696093fa4acf5babe5db5b27',
    user_id: '695fdcb16c5b76e715cf51ea',
    credit_package_id: 'pkg_starter_500',
    order_id: 'ord_12345',
    automation_id: null,
    transaction_type: 'purchase',
    status: 'completed',
    credit_amount: 500,
    balance_before: 9488,
    balance_after: 9988,
    description: 'Credit Package Purchase: Starter Pack',
    reference_id: 'pay_xyz123',
    operation_id: null,
    failure_reason: null,
    processed_at: '2026-01-08T10:30:00.000Z',
    cancelled_at: null,
    created_at: '2026-01-08T10:29:55.000Z',
    updated_at: '2026-01-08T10:30:00.000Z',
  },
  {
    _id: '696093fa4acf5babe5db5b28',
    user_id: '695fdcb16c5b76e715cf51ea',
    credit_package_id: null,
    order_id: null,
    automation_id: '695fdd576c5b76e715cf5210',
    transaction_type: 'consumption',
    status: 'completed',
    credit_amount: 2,
    balance_before: 9490,
    balance_after: 9488,
    description: 'Automation Executed: Welcome DM Trigger',
    reference_id: '695fdd576c5b76e715cf5211',
    operation_id: null,
    failure_reason: null,
    processed_at: '2026-01-07T14:22:10.000Z',
    cancelled_at: null,
    created_at: '2026-01-07T14:22:05.000Z',
    updated_at: '2026-01-07T14:22:10.000Z',
  },
  {
    _id: '696093fa4acf5babe5db5b29',
    user_id: '695fdcb16c5b76e715cf51ea',
    credit_package_id: null,
    order_id: null,
    automation_id: '695fdd576c5b76e715cf5209',
    transaction_type: 'consumption',
    status: 'completed',
    credit_amount: 4,
    balance_before: 9494,
    balance_after: 9490,
    description: 'Automation Executed: Price Inquiry Automation',
    reference_id: '695fdd576c5b76e715cf520d',
    operation_id: null,
    failure_reason: null,
    processed_at: '2026-01-06T09:15:30.000Z',
    cancelled_at: null,
    created_at: '2026-01-06T09:15:25.000Z',
    updated_at: '2026-01-06T09:15:30.000Z',
  },
];

// Generate daily usage data for the last 30 days
const generateDailyData = () => {
  const daily = [];
  const today = new Date();

  // Stable consumption values for 30 days
  const consumptionValues = [
    8, 12, 0, 5, 15, 3, 0, 10, 7, 0, 14, 6, 9, 0, 11, 4, 8, 0, 13, 2, 0, 7, 500,
    10, 5, 0, 12, 8, 6, 4,
  ];

  for (let i = 29; i >= 0; i--) {
    const date = new Date(today);
    date.setDate(date.getDate() - i);
    const index = 29 - i;

    daily.push({
      date: date.toISOString().split('T')[0],
      purchases: index === 22 ? 500 : 0,
      consumption: consumptionValues[index] || 0,
      adjustments: 0,
    });
  }

  return daily;
};

const dailyData = generateDailyData();
const totalConsumption = dailyData.reduce((acc, d) => acc + d.consumption, 0);

export const mockUsage: CreditUsage = {
  from: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
  to: new Date().toISOString(),
  totals: {
    purchases: 500,
    consumption: totalConsumption,
    adjustments: 0,
  },
  daily: dailyData,
  total_transactions: mockTransactions.length,
};

export const mockInvoices: Invoice[] = [
  {
    _id: 'inv_001',
    invoice_number: 'INV-2026-0001',
    user_id: '695fdcb16c5b76e715cf51ea',
    order_id: 'ord_12345',
    payment_provider: 'stripe',
    payment_id: 'pi_3PqR5tGH7jKlMnOp',
    status: 'succeeded',
    amount: 49.0,
    currency: 'USD',
    credits_purchased: 500,
    package_name: 'Starter Pack',
    tax_amount: 0,
    billing_email: 'john@example.com',
    billing_name: 'John Doe',
    billing_address: {
      line1: '123 Main St',
      city: 'San Francisco',
      state: 'CA',
      postal_code: '94105',
      country: 'US',
    },
    paid_at: '2026-01-08T10:30:00.000Z',
    created_at: '2026-01-08T10:29:55.000Z',
    updated_at: '2026-01-08T10:30:00.000Z',
  },
  {
    _id: 'inv_002',
    invoice_number: 'INV-2025-0045',
    user_id: '695fdcb16c5b76e715cf51ea',
    order_id: 'ord_12344',
    payment_provider: 'razorpay',
    payment_id: 'pay_NxYz1234AbCd',
    status: 'succeeded',
    amount: 4199.0,
    currency: 'INR',
    credits_purchased: 1000,
    package_name: 'Growth Pack',
    tax_amount: 755.82,
    billing_email: 'john@example.com',
    billing_name: 'John Doe',
    paid_at: '2025-12-15T14:22:00.000Z',
    created_at: '2025-12-15T14:21:30.000Z',
    updated_at: '2025-12-15T14:22:00.000Z',
  },
  {
    _id: 'inv_003',
    invoice_number: 'INV-2025-0044',
    user_id: '695fdcb16c5b76e715cf51ea',
    order_id: 'ord_12343',
    payment_provider: 'stripe',
    payment_id: 'pi_2OpQ4sGH6iJkLmNp',
    status: 'refunded',
    amount: 99.0,
    currency: 'USD',
    credits_purchased: 1200,
    package_name: 'Pro Pack',
    refund_amount: 99.0,
    refund_reason: 'Customer requested refund within 24 hours',
    refunded_at: '2025-11-21T09:15:00.000Z',
    billing_email: 'john@example.com',
    paid_at: '2025-11-20T16:45:00.000Z',
    created_at: '2025-11-20T16:44:30.000Z',
    updated_at: '2025-11-21T09:15:00.000Z',
  },
  {
    _id: 'inv_004',
    invoice_number: 'INV-2025-0043',
    user_id: '695fdcb16c5b76e715cf51ea',
    order_id: 'ord_12342',
    payment_provider: 'paypal',
    payment_id: 'PAYID-M2ABCD123',
    status: 'partially_refunded',
    amount: 149.0,
    currency: 'USD',
    credits_purchased: 2000,
    package_name: 'Business Pack',
    refund_amount: 50.0,
    refund_reason: 'Partial credits not used',
    refunded_at: '2025-10-30T11:00:00.000Z',
    billing_email: 'john@example.com',
    billing_name: 'John Doe',
    paid_at: '2025-10-15T08:30:00.000Z',
    created_at: '2025-10-15T08:29:00.000Z',
    updated_at: '2025-10-30T11:00:00.000Z',
  },
  {
    _id: 'inv_005',
    invoice_number: 'INV-2026-0002',
    user_id: '695fdcb16c5b76e715cf51ea',
    order_id: 'ord_12346',
    payment_provider: 'stripe',
    payment_id: 'pi_4RsT6uIJ8kLmNoQr',
    status: 'pending',
    amount: 29.0,
    currency: 'USD',
    credits_purchased: 250,
    package_name: 'Mini Pack',
    billing_email: 'john@example.com',
    created_at: '2026-01-10T06:15:00.000Z',
    updated_at: '2026-01-10T06:15:00.000Z',
  },
];
